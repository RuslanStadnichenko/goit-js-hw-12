{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\"\n\naxios.defaults.baseURL = 'https://pixabay.com'\nconst API_KEY = '43393189-93860efddddd16832e4d2b268'\n\nexport function requestServer(searchWord, numberPage) {\n    const searchParams = {\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        key: API_KEY,\n        q: searchWord,\n        page: numberPage,\n        per_page: 15\n    }\n\n    return axios.get('/api/?', { params: searchParams })\n}","export function createGallery(images) {\n    return images.map(image =>\n` <li class=\"gallery-item\">\n      <a class=\"gallery-link js-gallery-link\" href=\"${image.largeImageURL}\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" title=\"${image.tags}\">\n      </a>\n      <div class=\"image-details\">\n        <ul class=\"details-title\">\n         <li class=\"details-title-det\">\n           <h3 class=\"title-info\">Likes:</h3>\n           <p class=\"paragraph-info\">${image.likes}</p>\n         </li>\n         <li class=\"details-title-det\">\n           <h3 class=\"title-info\">Views:</h3>\n           <p class=\"paragraph-info\">${image.views}</p>\n         </li>  \n         <li class=\"details-title-det\">\n           <h3 class=\"title-info\">Comments:</h3>\n           <p class=\"paragraph-info\">${image.comments}</p>\n         </li>  \n         <li class=\"details-title-det\">\n           <h3 class=\"title-info\">Downloads:</h3>\n           <p class=\"paragraph-info\">${image.downloads}</p>\n         </li>\n        </ul>\n      </div>\n    </li>`).join('');\n}","import iziToast from \"izitoast\"; \nimport SimpleLightbox from \"simplelightbox\"; \nimport { requestServer } from './js/pixabay-api.js'; \nimport { createGallery } from './js/render-functions.js'; \n\nconst searchForm = document.querySelector('.js-search-form'); \nconst searchInput = document.querySelector('.js-search-input'); \nconst listGallery = document.querySelector('.gallery-list'); \nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.gallery-btn')\n\nlet numberPage = 1\n\nasync function inputSearch(event) {\n    event.preventDefault();\n\n    numberPage = 1;\n\n    if (searchInput.value.trim() === '') {\n        iziToast.error({\n            message: 'Enter a search name',\n            position: 'topRight',\n        });\n        listGallery.innerHTML = '';\n        return;\n    }\n\n    try {\n        loader.classList.add('is-visible');\n        listGallery.innerHTML = '';\n        searchInput.value = '';\n        const { obj } = await requestServer(textInput, numberPage);\n        loader.classList.remove('is-visible');\n\n        if (!obj || !obj.hits || obj.hits.length === 0) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Photo not found',\n                position: 'topRight',\n            });\n            return;\n        }\n\n        if (obj && obj.hits && obj.hits.length > 0) {\n            loadMoreBtn.classList.add('is-hidden');\n            loadMoreBtn.removeEventListener('click', onLoadMoreBtn);\n            iziToast.info({\n                message: \"End of search results.\",\n                position: 'topRight',\n            });\n        } else {\n            loadMoreBtn.classList.remove('is-hidden');\n        }\n\n        listGallery.innerHTML = createGallery(obj.hits);\n        loadMoreBtn.addEventListener('click', onLoadMoreBtn);\n        libraryLightBox.refresh();\n\n        searchInput.value = '';\n    } catch (error) {\n        console.log(error);\n    }\n}\n\n\n\nlet libraryLightBox = new SimpleLightbox('.js-gallery-link', { \n    captionDelay: 250, \n    captionsData: 'alt', \n});\n\nlibraryLightBox.on('show.simplelightbox', event => { \n    event.preventDefault(); \n});\n\nasync function onLoadMoreBtn() {\n    try {\n        numberPage++\n        const { obj } = await requestServer(textInput, numberPage)\n\n        listGallery.insertAdjacentHTML('beforeend', createGallery(obj.hits))\n\n        function getCardHeight() {\n            const card = document.querySelector('.gallery-item')\n            const cardRect = card.getBoundingClientRect()\n            return cardRect.height\n        }\n\n        function smoothScroll(distance) {\n            window.scrollBy({\n                top: distance,\n                behavior: 'smooth'\n            })\n        }\n        const cardHeight = getCardHeight()\n        smoothScroll(cardHeight * 2)\n     \n\n    } catch (error) {\n        console.log(error)\n    }\n}\n\nsearchForm.addEventListener('submit', inputSearch)"],"names":["axios","API_KEY","requestServer","searchWord","numberPage","searchParams","createGallery","images","image","searchForm","searchInput","listGallery","loader","loadMoreBtn","inputSearch","event","iziToast","obj","onLoadMoreBtn","libraryLightBox","error","SimpleLightbox","getCardHeight","smoothScroll","distance","cardHeight"],"mappings":"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"}
{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\"\n\naxios.defaults.baseURL = 'https://pixabay.com'\nconst API_KEY = '43393189-93860efddddd16832e4d2b268';\n\nexport function requestServer(searchWord, numberPage) {\n    const searchParams = {\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        key: API_KEY,\n        q: searchWord,\n        page: numberPage,\n        per_page: 15\n    }\n\n    return axios.get('/api/?', { params: searchParams })\n}\n","export function createCard(elements) {\n    return elements.map(elem => {\n        return `<li class=\"gallery-item\">\n            <a class=\"gallery-item__link\" href=\"${elem.largeImageURL}\"><div class=\"img-container\"><img class=\"gallery-img\" src=\"${elem.webformatURL}\" alt=\"${elem.tags}\"></div>\n            <ul class=\"img-description__list\">\n            <li class=\"img-description__item\">\n                <p class=\"img-description__title\">\n                Likes\n                </p>\n                <p class=\"img-description__text\">\n                ${elem.likes}\n                </p>\n            </li>\n            <li class=\"img-description__item\">\n                <p class=\"img-description__title\">\n                Views\n                </p>\n                <p class=\"img-description__text\">\n                ${elem.views}\n                </p>\n            </li>\n            <li>\n                <li class=\"img-description__item\">\n                <p class=\"img-description__title\">\n                    Comments\n                </p>\n                <p class=\"img-description__text\">\n                    ${elem.comments}\n                </p>\n                </li>\n            </li>\n            <li>\n                <li class=\"img-description__item\">\n                <p class=\"img-description__title\">\n                    Downloads\n                </p>\n                <p class=\"img-description__text\">\n                    ${elem.downloads}\n                </p>\n                </li>\n            </li>\n            </ul>\n        </a>\n      </li>`\n    }).join('')\n}","import iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\n\nimport { requestServer } from \"./js/pixabay-api\";\nimport { createCard } from \"./js/render-functions\";\n\nconst formElem = document.querySelector('.form');\nconst inputFormElem = document.querySelector('.form-input');\nconst galleryListElem = document.querySelector('.gallery-list');\nconst loaderElem = document.querySelector('.loader');\nconst loadMoreBtnElem = document.querySelector('.gallery-btn');\n\nlet textInput = null;\nlet numberPage = 1;\n\nasync function inputSearch(event) {\n    event.preventDefault();\n\n    textInput = inputFormElem.value;\n    numberPage = 1;\n\n    if (textInput.trim() === '') {\n        iziToast.error({\n            message: 'Enter a search name',\n            position: 'topRight',\n        });\n        galleryListElem.innerHTML = '';\n\n        return;\n    }\n\n    try {\n        loaderElem.classList.add('is-visible');\n        galleryListElem.innerHTML = '';\n        inputFormElem.value = '';\n\n        const { data } = await requestServer(textInput, numberPage);\n        loaderElem.classList.remove('is-visible');\n\n        if (!data.hits.length) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Photo not found',\n                position: 'topRight',\n            });\n            return;\n        }\n\n        if (data.hits.length >= data.totalHits) {\n            loadMoreBtnElem.classList.add('is-hidden');\n            loadMoreBtnElem.removeEventListener('click', onLoadMoreBtn);\n\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                backgroundColor: 'blue',\n                theme: 'light',\n                position: 'topRight',\n            });\n        } else {\n            loadMoreBtnElem.classList.remove('is-hidden');\n        }\n\n        galleryListElem.innerHTML = createCard(data.hits);\n        loadMoreBtnElem.addEventListener('click', onLoadMoreBtn);\n\n        gallery.refresh(); \n\n    } catch (error) {\n        iziToast.error({\n            message: 'An error occurred. Please try again later.',\n            position: 'topRight',\n        });\n        console.error(error);\n    }\n}\n\nlet gallery = new SimpleLightbox('.gallery-item__link', {\n    captionsData: 'alt',\n    captionDelay: 250\n});\n\ngallery.on('show.simplelightbox', function (event) {\n    event.preventDefault();\n});\n\nasync function onLoadMoreBtn() {\n    try {\n        numberPage++;\n        const { data } = await requestServer(textInput, numberPage);\n\n        galleryListElem.insertAdjacentHTML('beforeend', createCard(data.hits));\n\n        function getCardHeight() {\n            const card = document.querySelector('.gallery-item');\n            const cardRect = card.getBoundingClientRect();\n            return cardRect.height;\n        }\n\n        function smoothScroll(distance) {\n            window.scrollBy({\n                top: distance,\n                behavior: 'smooth',\n            });\n        }\n        const cardHeight = getCardHeight();\n        smoothScroll(cardHeight * 2);\n\n        gallery.refresh(); \n\n    } catch (error) {\n        iziToast.error({\n            message: 'An error occurred while loading more images. Please try again later.',\n            position: 'topRight',\n        });\n        console.error(error);\n    }\n}\n\nformElem.addEventListener('submit', inputSearch);\n"],"names":["axios","API_KEY","requestServer","searchWord","numberPage","searchParams","createCard","elements","elem","formElem","inputFormElem","galleryListElem","loaderElem","loadMoreBtnElem","textInput","inputSearch","event","iziToast","data","onLoadMoreBtn","gallery","error","SimpleLightbox","getCardHeight","smoothScroll","distance","cardHeight"],"mappings":"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"}